{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The v2.0.0 update introduces substantial performance improvements for the SDK, driven by several optimizations and technical enhancements:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Reduced time to first image when opening a flyer with the new rendering engine by re-writing manifest parsing"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Reduced total memory usage by 5-10x by eagerly caching to disk and evicting off-screen images from memory"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Improved scrolling responsiveness by moving most\/all download\/parsing\/rendering-related actions to worker threads. This results in less “janky” scrolling when viewing very large flyers"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Reduced bandwidth requirements by enabling HTTP Range Requests to allow partial downloads, instead of re-downloads"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Reduced likelihood of temporarily blank screens by dynamically changing download\/rendering priorities to prefer what should be currently on-screen, and deferring all off-screen images"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"These updates will facilitate some upcoming performance enhancements, namely pre-fetching. Pre-fetching will allow the SDK to optionally download and cache images before they are needed, resulting in a much smoother user experience and an even lower time to first image."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"These improvements are the result of a significant re-write of the SDK’s rendering engine, and as such, we are releasing this as a breaking version change."}]},{"anchor":"Initializing-the-SDK","level":2,"type":"heading","text":"Initializing the SDK"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In v1.x, the SDK was initialized via a singleton and using two methods. In v2.x, interaction with the SDK occurs through an instance of "},{"type":"codeVoice","code":"DigitalFlyer"},{"type":"text","text":", and it’s up to the consumer to manage the lifecycle of this object however fits their workflow."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Refer to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/DigitalFlyer\/init(subscriptionKey:client:banner:environment:)"},{"type":"text","text":" and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/using-the-sdk"},{"type":"text","text":" for more information."}]},{"type":"codeListing","syntax":"swift","code":["\/\/ v1.x","DFManager.shared.initializeWith(\"MY_SUBSCRIPTION_KEY\")","DFManager.shared.setSdkParams(","    \"myBanner\",","    \"myClient\",","    \"staging\",","    \"myStoreId\",","    \"en\",","    Date(),","    .black,",") { (response, error) in","    \/\/ ... other SDK calls ...","},","","\/\/ v2.x","let digitalFlyer = try DigitalFlyer(","    subscriptionKey: \"mySubscriptionKey\",","    client: \"myClient\",",")"]},{"anchor":"Listing-Available-Publications","level":2,"type":"heading","text":"Listing Available Publications"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In v1.x, available Publications were retrieved via the "},{"type":"codeVoice","code":"onLandingResponse"},{"type":"text","text":" using static SDK parameters and helper methods. In lieu of this, v2.x provides a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/DigitalFlyer\/listPublications(storeId:language:date:completion:)"},{"type":"text","text":" method on the "},{"type":"codeVoice","code":"DigitalFlyer"},{"type":"text","text":" object, which returns a list of "},{"type":"codeVoice","code":"Publication.Attributes"},{"type":"text","text":" objects. Refer to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/using-the-sdk"},{"type":"text","text":" for details."}]},{"type":"codeListing","syntax":"swift","code":["","```swift","\/\/ v1.x","DFManager.shared.changeStoreId(\"myStoreId\")","DFManager.shared.changeLang(\"en\")","DFManager.shared.setStoreIdAndLanguage(\"myStoreId\", \"en\")","DFManager.shared.setSdkParams(","    \"myBanner\",","    \"myClient\",","    \"staging\",","    \"myStoreId\",","    \"en\",","    Date(),","    .black,",") { (response, error) in","    \/\/ ... other SDK calls ...","}","","\/\/ v2.x","digitalFlyer.listPublications(storeId: storeId) { result in","    ...","}"]},{"anchor":"Retrieving-and-Rendering-a-Publication","level":2,"type":"heading","text":"Retrieving and Rendering a Publication"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The v1.x SDK did not have an explicit method for retrieving a Publication. Instead, the "},{"type":"codeVoice","code":"onLandingResponse"},{"type":"text","text":" callback provided an object that was used to populate the parameters of a "},{"type":"codeVoice","code":"VerticalView"},{"type":"text","text":" or "},{"type":"codeVoice","code":"horizontalController"},{"type":"text","text":". The publication would be downloaded and rendered in one step (with a lot of boilerplate)."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In lieu of this, v2.x provides an explicit "},{"type":"reference","isActive":true,"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/DigitalFlyer\/getPublication(from:completion:)"},{"type":"text","text":" method on the "},{"type":"codeVoice","code":"DigitalFlyer"},{"type":"text","text":" object, which returns a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/Publication"},{"type":"text","text":" object. This object is passed downstream to the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/FlyerView"},{"type":"text","text":" renderer, along with an optional "},{"type":"reference","isActive":true,"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/FlyerView\/Configuration"},{"type":"text","text":" object. Refer to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/using-the-sdk"},{"type":"text","text":" for more details."}]},{"type":"codeListing","syntax":"swift","code":["\/\/ v1.x - vertical","let flyerView = VerticalView.instanceFromNib()","flyerView.delegate = self","flyerView.title = titleid","flyerView.publicationId = publicationId","flyerView.totalPages = count","flyerView.startDateStr = startDate","flyerView.endDateStr = endDate","flyerView.isBlockedFlyer = blockedFlyer","flyerView.initFlyerView()","myView.addSubview(flyerView)","flyerView.frame = myView!.bounds","","\/\/ v1.x - horizontal","let flyerViewController = DFManager.shared.horizontalController()","flyerViewController.delegate = self","flyerViewController.titleId = titleid","flyerViewController.publicationId = publicationId","flyerViewController.isBlockedFlyer = blockedFlyer","addChild(flyerViewController)","flyerViewController.view.frame = myView!.bounds","myView!.addSubview(flyerViewController.view)","flyerViewController.didMove(toParent: self)","NotificationCenter.default.post(name: Notification.Name(rawValue: \"removeFromSuberView\"), object: nil)","","\/\/ v2.x","digitalFlyer.getPublication(from: attributes) { result in","    ... stash the publication on a variable ...","}","...","let flyerView = FlyerView(","    frame: self.view.frame,","    publication: publication,","    configuration: configuration"," ) { event in","    ... handle events ...","}"]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/tcdigitalflyer\/migration-guide"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/migration-guide","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Transition existing apps from v1.x to 2.0.0"}],"kind":"article","metadata":{"roleHeading":"Article","title":"Migration Guide","role":"article","modules":[{"name":"TCDigitalFlyer"}]},"hierarchy":{"paths":[["doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer"]]},"references":{"doc://TCDigitalFlyer/documentation/TCDigitalFlyer":{"role":"collection","title":"TCDigitalFlyer","abstract":[{"type":"text","text":"The Transcontinental iOS SDK provides an easy way to interact with the Transcontinental Web API in order to access digital flyers. The SDK also provides pre-built UI components to allow users to browse through flyers and retrieve detailed product information."}],"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer","kind":"symbol","type":"topic","url":"\/documentation\/tcdigitalflyer"},"doc://TCDigitalFlyer/documentation/TCDigitalFlyer/using-the-sdk":{"role":"article","title":"Using the SDK","abstract":[],"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/using-the-sdk","kind":"article","type":"topic","url":"\/documentation\/tcdigitalflyer\/using-the-sdk"},"doc://TCDigitalFlyer/documentation/TCDigitalFlyer/DigitalFlyer":{"role":"symbol","title":"DigitalFlyer","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"DigitalFlyer"}],"abstract":[{"type":"text","text":"The entry-point for interacting with the SDK."}],"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/DigitalFlyer","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"DigitalFlyer"}],"url":"\/documentation\/tcdigitalflyer\/digitalflyer"},"doc://TCDigitalFlyer/documentation/TCDigitalFlyer/Publication":{"role":"symbol","title":"Publication","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"Publication"}],"abstract":[],"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/Publication","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Publication"}],"url":"\/documentation\/tcdigitalflyer\/publication"},"doc://TCDigitalFlyer/documentation/TCDigitalFlyer/DigitalFlyer/getPublication(from:completion:)":{"role":"symbol","title":"getPublication(from:completion:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"getPublication"},{"kind":"text","text":"("},{"kind":"externalParam","text":"from"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Publication","preciseIdentifier":"s:14TCDigitalFlyer11Publicationa"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Attributes","preciseIdentifier":"s:6Domain11PublicationV10AttributesV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"completion"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","text":"Result","preciseIdentifier":"s:s6ResultO"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Publication","preciseIdentifier":"s:14TCDigitalFlyer11Publicationa"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"DFError","preciseIdentifier":"s:14TCDigitalFlyer7DFErrora"},{"kind":"text","text":">) -> "},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":")"}],"abstract":[{"type":"text","text":"Retrieve the full "},{"type":"reference","isActive":true,"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/Publication"},{"type":"text","text":", including attributes and page content."}],"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/DigitalFlyer\/getPublication(from:completion:)","kind":"symbol","type":"topic","url":"\/documentation\/tcdigitalflyer\/digitalflyer\/getpublication(from:completion:)"},"doc://TCDigitalFlyer/documentation/TCDigitalFlyer/DigitalFlyer/init(subscriptionKey:client:banner:environment:)":{"role":"symbol","title":"init(subscriptionKey:client:banner:environment:)","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"subscriptionKey"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"client"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"banner"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"environment"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Environment","preciseIdentifier":"s:14TCDigitalFlyer11EnvironmentO"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Creates a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/DigitalFlyer"},{"type":"text","text":" instance"}],"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/DigitalFlyer\/init(subscriptionKey:client:banner:environment:)","kind":"symbol","type":"topic","url":"\/documentation\/tcdigitalflyer\/digitalflyer\/init(subscriptionkey:client:banner:environment:)"},"doc://TCDigitalFlyer/documentation/TCDigitalFlyer/FlyerView":{"role":"symbol","title":"FlyerView","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"FlyerView"}],"abstract":[{"type":"text","text":"A custom view that displays the Digital Flyer."},{"type":"text","text":" "},{"type":"text","text":"This view is the entrypoint for the Digital Flyer."}],"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/FlyerView","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"FlyerView"}],"url":"\/documentation\/tcdigitalflyer\/flyerview"},"doc://TCDigitalFlyer/documentation/TCDigitalFlyer/FlyerView/Configuration":{"role":"symbol","title":"FlyerView.Configuration","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"Configuration"}],"abstract":[{"type":"text","text":"The FlyerView configuration with defaults."}],"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/FlyerView\/Configuration","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Configuration"}],"url":"\/documentation\/tcdigitalflyer\/flyerview\/configuration"},"doc://TCDigitalFlyer/documentation/TCDigitalFlyer/DigitalFlyer/listPublications(storeId:language:date:completion:)":{"role":"symbol","title":"listPublications(storeId:language:date:completion:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"listPublications"},{"kind":"text","text":"("},{"kind":"externalParam","text":"storeId"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"language"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Language","preciseIdentifier":"s:14TCDigitalFlyer8Languagea"},{"kind":"text","text":", "},{"kind":"externalParam","text":"date"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Date","preciseIdentifier":"s:10Foundation4DateV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"completion"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","text":"Result","preciseIdentifier":"s:s6ResultO"},{"kind":"text","text":"<["},{"kind":"typeIdentifier","text":"Publication","preciseIdentifier":"s:14TCDigitalFlyer11Publicationa"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Attributes","preciseIdentifier":"s:6Domain11PublicationV10AttributesV"},{"kind":"text","text":"], "},{"kind":"typeIdentifier","text":"DFError","preciseIdentifier":"s:14TCDigitalFlyer7DFErrora"},{"kind":"text","text":">) -> "},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":")"}],"abstract":[{"type":"text","text":"Retrieve a list of all active publications."}],"identifier":"doc:\/\/TCDigitalFlyer\/documentation\/TCDigitalFlyer\/DigitalFlyer\/listPublications(storeId:language:date:completion:)","kind":"symbol","type":"topic","url":"\/documentation\/tcdigitalflyer\/digitalflyer\/listpublications(storeid:language:date:completion:)"}}}